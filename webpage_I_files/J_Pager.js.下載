function JPager(c){this.JPager=$(c.Pager);this.GridView=$(c.GridView);this.DataWarehouse=$(c.DataWarehouse);this.DataWarehouseDatas=function(){return this.DataWarehouse.find("tr")};this.DataWarehouseDatasGridShow=function(){return this.DataWarehouse.find("tr").filter(function(a){return 1==$(this).data("gridshow")})};this.GridViewDatas=function(){return this.GridView.find("tbody tr")};this.DataCount=function(){return this.DataWarehouseDatasGridShow().length};this.PageSize=c.PageSize;this._PagerUIMaxSize=
10;this._PagerUILeftMaxSize=4;this.PagerUL=this.JPager.find("ul");this.PageIndex=1;this.PageMaxIndex=function(){return this.PagerUL.find("li").length};if(this.SearchBox=$(c.SearchBox))c=$('<input id=txtSearch type="search"  value="" >'),this.SearchBox.append(c),this.SearchBoxKeyword=function(){return this.SearchBox.find("input").val()},c.keyup($.proxy(function(){this.Search(this.SearchBoxKeyword())},this));this.BindPager=$.proxy(function(){this.PagerUL.find("li").remove();for(i=1;i<=Math.ceil(this.DataCount()/
this.PageSize);i++){var a=$('<li page="'+i+'"><a href="javascript:void(0);">'+i+"</a></li>"),b=this;a.click(function(){b.ChangePageIndex($(this).attr("page"))});this.PagerUL.append(a)}},this);this.ChangePageIndex=$.proxy(function(a){this.PageIndex=parseInt(a);this.PagerUL.find("li").removeClass("is-active");this.PagerUL.find('li[page="'+a+'"]').addClass("is-active");this.RecoverDataWarehouse();a=this.DataWarehouseDatasGridShow().slice((a-1)*this.PageSize,a*this.PageSize);this.GridView.find("tbody").empty();
this.GridView.append(a);var b=this.PageIndex-this._PagerUILeftMaxSize;0>=b&&(b=1);a=b+this._PagerUIMaxSize-1;this.PageMaxIndex()<=a&&(b-=a-this.PageMaxIndex(),a-=a-this.PageMaxIndex());for(var d=[];b<=a;b++)d.push(b);this.PagerUL.find("li").hide();$.each(this.PagerUL.find("li"),function(e,f){-1<$.inArray(e+1,d)&&$(f).show()})},this);this.Search=$.proxy(function(a){this.RecoverDataWarehouse();""==a?this.DataWarehouseDatas().data("gridshow",!0):(this.DataWarehouseDatas().data("gridshow",!1),this.DataWarehouseDatas().each(function(){var b=
!1;$(this).find("td").each(function(){-1<$(this).html().toLowerCase().indexOf(a.toLowerCase())&&(b=!0)});b&&$(this).data("gridshow",!0)}));this.BindPager();this.ChangePageIndex(1)},this);this.RecoverDataWarehouse=$.proxy(function(a){this.DataWarehouse.append(this.GridViewDatas());this.DataWarehouseDatas().sort(function(b,d){return $(d).data("position")<$(b).data("position")?1:-1}).appendTo(this.DataWarehouse)},this);this.Search("")}
function StopBubble(c){c&&c.stopPropagation?c.stopPropagation():window.event.cancelBubble=!0};