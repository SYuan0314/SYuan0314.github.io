define(["getNode","mobileFilter","langFilter"],function(h,v,w){return function(e,f,l){var a={bindNode:".hd",targetNode:null,targetClass:"is-active",toggleClass:"is-active",clickToRemove:!1,event:"click",cookie:!1,text:null,addHref:!0,chText:"\u9023\u7d50",addHd:!1,debug:!1,btnTextRemove:!1};$.extend(a,f);var c=$(e),m=$(a.targetNode),b=null;b=".hd"===a.bindNode?h.getHdLink(e,a.addHd).find("a"):".ct"===a.bindNode?h.getCtIn(e).find("a"):".ft"===a.bindNode?h.getFtItemBtn(e).find("a"):c.find("a");var g=
null;g=null==a.text?b.text():a.text;a.btnOrangeText&&k&&a.btnActiveText?(a.btnTextRemove&&b.text(a.btnActiveText),b.attr("title",a.btnActiveText+"["+g+"]")):a.btnOrangeText&&(a.btnTextRemove&&b.text(a.btnOrangeText),b.attr("title",a.btnOrangeText+"["+g+"]"));var n=c.attr("class").replace(a.toggleClass,""),k=null;a.cookie&&(k=$.cookie(n));"1"===k?(m.addClass(a.targetClass),c.addClass(a.toggleClass)):"0"===k&&(m.removeClass(a.targetClass),c.removeClass(a.toggleClass));void 0===b.attr("href")&&a.addHref&&
b.attr("href","#");"click"===a.event&&a.clickToRemove&&(f=$("body"),c.on("click",function(d){d.stopPropagation();$("[data-funclog]").filter(function(x,r){var p=r.getAttribute("data-funclog");p=/('clickToRemove':true)/i.test(p);var t=r!=e;return p&&t}).removeClass(a.toggleClass)}),f.on("click",function(){c.removeClass(a.toggleClass)}));b.on(a.event,function(d){d.preventDefault();$(this).trigger(l)});var q=h.getCtIn(e).find("li");f=q.eq(-1);var u=q.length;f.on("keydown",function(d){1==d.shiftKey&&9==
d.which?q.eq(u-2).focus():9==d.which&&c.removeClass("is-active")});b.on(l,function(){m.toggleClass(a.targetClass);c.toggleClass(a.toggleClass);-1<c.attr("class").search(a.toggleClass)&&a.cookie?$.cookie(n,"1"):a.cookie&&$.cookie(n,"0");b.text()===a.btnOrangeText&&a.btnActiveText?(a.btnTextRemove&&b.text(a.btnActiveText),b.attr("title",a.btnActiveText+"["+g+"]")):b.text()===a.btnActiveText&&a.btnOrangeText&&(a.btnTextRemove&&b.text(a.btnOrangeText),b.attr("title",a.btnOrangeText+"["+g+"]"))});a.debug&&
(console.log("\u9810\u8a2d\u503c:",a),console.log("\u6a94\u6848 "+l+".js \u5df2\u9806\u5229\u57f7\u884c\u3002"))}});